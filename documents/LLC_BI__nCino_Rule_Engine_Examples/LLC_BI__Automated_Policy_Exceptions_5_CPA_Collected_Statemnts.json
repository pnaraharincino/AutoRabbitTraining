{"attributes":{"type":"Flow","url":"/services/data/v35.0/tooling/sobjects/Flow/30136000000AYtVAAW"},"Id":"30136000000AYtVAAW","DefinitionId":"30036000000DHObAAO","MasterLabel":"CPAcollectedStatements","ManageableState":"unmanaged","VersionNumber":1,"Status":"Draft","Description":null,"ProcessType":"AutoLaunchedFlow","CreatedDate":"2016-09-28T17:06:21.000+0000","CreatedById":"00536000002AZcMAAW","LastModifiedDate":"2016-09-28T17:06:28.000+0000","LastModifiedById":"00536000002AZcMAAW","Metadata":{"actionCalls":[],"apexPluginCalls":[],"assignments":[{"assignmentItems":[{"assignToReference":"PolicyException.LLC_BI__Code__c","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"003"}},{"assignToReference":"PolicyException.LLC_BI__Loan__c","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"LegalEntity.LLC_BI__Loan__c","numberValue":null,"stringValue":null}},{"assignToReference":"PolicyException.LLC_BI__Severity__c","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"CriticalConstant","numberValue":null,"stringValue":null}},{"assignToReference":"PolicyException.LLC_BI__Type__c","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"RegulatoryConstant","numberValue":null,"stringValue":null}},{"assignToReference":"PolicyException.Name","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"CreateRegulatoryPolicyExceptionName","numberValue":null,"stringValue":null}},{"assignToReference":"PolicyException.LLC_BI__Relationship__c","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"LegalEntity.LLC_BI__Account__c","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Insert_PE"},"description":null,"label":"Assign PE","locationX":880,"locationY":82,"name":"Assign_PE","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"LegalEntity","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"inLegalEntity","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"GetLoan"},"description":null,"label":"assignLegalEntity","locationX":431,"locationY":15,"name":"assignLegalEntity","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"EndFlow","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":true,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":null,"description":null,"label":"EndThisFlow","locationX":487,"locationY":329,"name":"EndThisFlow","processMetadataValues":[]}],"choices":[],"constants":[{"dataType":"String","description":null,"name":"CPAAudit","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"CPA Audit"}},{"dataType":"String","description":null,"name":"CreateRegulatoryPolicyExceptionName","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Financial reporting does not comply with policy"}},{"dataType":"String","description":null,"name":"CriticalConstant","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Critical"}},{"dataType":"String","description":null,"name":"RegulatoryConstant","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Regulatory"}}],"decisions":[{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"[Default Outcome]","description":null,"label":"AmountOver250000","locationX":51,"locationY":262,"name":"AmountOver250000","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"Loan.LLC_BI__Amount__c","operator":"GreaterThan","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"AmountThreshold","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"getUnderwritingBundle"},"description":null,"label":"over250000","name":"over250000","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"GetStatemntTemplateBus"},"defaultConnectorLabel":"isBusiness","description":null,"label":"businessType","locationX":280,"locationY":626,"name":"businessType","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"LegalEntity.LLC_BI__Entity_Type__c","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"individual","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"GetStatementTemplateInd"},"description":null,"label":"isIndividual","name":"isIndividual","processMetadataValues":[]},{"conditionLogic":"and","conditions":[{"leftValueReference":"underwritingBundle","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":true,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"description":null,"label":"isNull","name":"isNull","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"didNotInsertPE","description":null,"label":"checkinsertedPE","locationX":572,"locationY":12,"name":"checkinsertedPE","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"insertedPE","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":true,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":null,"description":null,"label":"didInsertPE","name":"didInsertPE","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Bundle Is Null","description":null,"label":"Is Bundle Exists","locationX":94,"locationY":541,"name":"Is_Bundle_Exists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"underwritingBundle","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"businessType"},"description":null,"label":"Bundle Exists","name":"Bundle_Exists","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Loan Is Null","description":null,"label":"Is Loan Exists","locationX":119,"locationY":128,"name":"Is_Loan_Exists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"Loan","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"AmountOver250000"},"description":null,"label":"Loan Exists","name":"Loan_Exists","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Statement Period Doesnt Exist","description":null,"label":"Is Statement Period Exists","locationX":949,"locationY":312,"name":"Is_Statement_Period_Exists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"StatementPeriodIndividual","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"isStatemntTypeSourceCPA"},"description":null,"label":"Statement Period Exists","name":"Statement_Period_Exists","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Statement Template Doesnt Exist","description":null,"label":"Is Statement Template Exists","locationX":696,"locationY":621,"name":"Is_Statement_Template_Exists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"StatementTemplate","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"isStatmentTempateValid"},"description":null,"label":"Statement Template Exists","name":"Statement_Template_Exists","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"Assign_PE"},"defaultConnectorLabel":"[Default Outcome]","description":null,"label":"isStatemntTypeSourceCPA","locationX":945,"locationY":199,"name":"isStatemntTypeSourceCPA","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"StatementPeriodIndividual.LLC_BI__Source__c","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"CPAAudit","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"description":null,"label":"statementTypeSourceISCPA","name":"statementTypeSourceISCPA","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Is not Valid","description":null,"label":"isStatmentTempateValid","locationX":850,"locationY":524,"name":"isStatmentTempateValid","processMetadataValues":[],"rules":[{"conditionLogic":"(1 OR 2)","conditions":[{"leftValueReference":"StatementTemplate.LLC_BI__Is_Personal_Financial_Statement__c","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"boolTrueNum","numberValue":null,"stringValue":null}},{"leftValueReference":"StatementTemplate.LLC_BI__Is_Balance_Sheet__c","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"boolTrueNum","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"GetStatementPeriod"},"description":null,"label":"Is Valid","name":"Is_Valid","processMetadataValues":[]}]}],"description":null,"dynamicChoiceSets":[],"formulas":[],"interviewLabel":"CPAcollectedStatements {!$Flow.CurrentDateTime}","label":"CPAcollectedStatements","loops":[],"processMetadataValues":[],"processType":"AutoLaunchedFlow","recordCreates":[],"recordDeletes":[],"recordLookups":[{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"Is_Loan_Exists"},"description":null,"faultConnector":null,"filters":[{"field":"Id","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"LegalEntity.LLC_BI__Loan__c","numberValue":null,"stringValue":null}}],"label":"GetLoan","locationX":267,"locationY":39,"name":"GetLoan","object":"LLC_BI__Loan__c","outputAssignments":[],"outputReference":"Loan","processMetadataValues":[],"queriedFields":["LLC_BI__Underwriting_Summary__c","LLC_BI__Account__c","LLC_BI__Amount__c"],"sortField":null,"sortOrder":null},{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"Is_Statement_Period_Exists"},"description":null,"faultConnector":null,"filters":[{"field":"LLC_BI__Spread_Statement_Type__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"StatementTemplate.Id","numberValue":null,"stringValue":null}}],"label":"GetStatementPeriod","locationX":922,"locationY":414,"name":"GetStatementPeriod","object":"LLC_BI__Spread_Statement_Period__c","outputAssignments":[],"outputReference":"StatementPeriodIndividual","processMetadataValues":[],"queriedFields":["LLC_BI__Source__c","LLC_BI__Spread_Statement_Type__c","LLC_BI__Statement_Date__c"],"sortField":"LLC_BI__Statement_Date__c","sortOrder":"Desc"},{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"Is_Statement_Template_Exists"},"description":null,"faultConnector":null,"filters":[{"field":"LLC_BI__Bundle__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"underwritingBundle.Id","numberValue":null,"stringValue":null}},{"field":"LLC_BI__Is_Personal_Financial_Statement__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"boolTrueNum","numberValue":null,"stringValue":null}}],"label":"GetStatementTemplateInd","locationX":498,"locationY":576,"name":"GetStatementTemplateInd","object":"LLC_BI__Spread_Statement_Type__c","outputAssignments":[],"outputReference":"StatementTemplate","processMetadataValues":[],"queriedFields":["LLC_BI__Is_Personal_Financial_Statement__c","Id","LLC_BI__Type__c","LLC_BI__Is_Balance_Sheet__c"],"sortField":null,"sortOrder":null},{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"Is_Statement_Template_Exists"},"description":null,"faultConnector":null,"filters":[{"field":"LLC_BI__Bundle__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"underwritingBundle.Id","numberValue":null,"stringValue":null}},{"field":"LLC_BI__Is_Balance_Sheet__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"boolTrueNum","numberValue":null,"stringValue":null}}],"label":"GetStatemntTemplateBus","locationX":504,"locationY":663,"name":"GetStatemntTemplateBus","object":"LLC_BI__Spread_Statement_Type__c","outputAssignments":[],"outputReference":"StatementTemplate","processMetadataValues":[],"queriedFields":["LLC_BI__Type__c","LLC_BI__Is_Balance_Sheet__c","Id","LLC_BI__Is_Personal_Financial_Statement__c"],"sortField":null,"sortOrder":null},{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"Is_Bundle_Exists"},"description":null,"faultConnector":null,"filters":[{"field":"LLC_BI__Is_Disabled__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}},{"field":"LLC_BI__Relationship__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"LegalEntity.LLC_BI__Account__c","numberValue":null,"stringValue":null}}],"label":"getUnderwritingBundle","locationX":47,"locationY":403,"name":"getUnderwritingBundle","object":"LLC_BI__Underwriting_Bundle__c","outputAssignments":[],"outputReference":"underwritingBundle","processMetadataValues":[],"queriedFields":["LLC_BI__Relationship__c","Id"],"sortField":null,"sortOrder":null}],"recordUpdates":[],"screens":[],"startElementReference":"assignLegalEntity","steps":[],"subflows":[{"connector":{"processMetadataValues":[],"targetReference":"checkinsertedPE"},"description":null,"flowName":"InsertPolicyExceptionUnique","inputAssignments":[{"name":"inPolicyException","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"PolicyException","numberValue":null,"stringValue":null}}],"label":"Insert PE","locationX":736,"locationY":33,"name":"Insert_PE","outputAssignments":[{"assignToReference":"insertedPE","name":"outDidInsert","processMetadataValues":[]}],"processMetadataValues":[]}],"textTemplates":[],"urls":null,"variables":[{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"Account","objectType":"Account","processMetadataValues":[],"scale":null,"value":null},{"dataType":"Currency","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"AmountThreshold","objectType":null,"processMetadataValues":[],"scale":2,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":250000.0,"stringValue":null}},{"dataType":"Number","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"boolTrueNum","objectType":null,"processMetadataValues":[],"scale":0,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":1.0,"stringValue":null}},{"dataType":"String","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"borrower","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Borrower"}},{"dataType":"Boolean","description":null,"isCollection":false,"isInput":false,"isOutput":true,"name":"EndFlow","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}},{"dataType":"String","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"individual","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Individual"}},{"dataType":"SObject","description":null,"isCollection":false,"isInput":true,"isOutput":false,"name":"inLegalEntity","objectType":"LLC_BI__Legal_Entities__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"Boolean","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"insertedPE","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"LegalEntity","objectType":"LLC_BI__Legal_Entities__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"Loan","objectType":"LLC_BI__Loan__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"String","description":null,"isCollection":false,"isInput":true,"isOutput":false,"name":"LoanId","objectType":null,"processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"PolicyException","objectType":"LLC_BI__Policy_Exception__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"spread","objectType":"LLC_BI__Spread__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"StatementPeriodIndividual","objectType":"LLC_BI__Spread_Statement_Period__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"StatementTemplate","objectType":"LLC_BI__Spread_Statement_Type__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"String","description":null,"isCollection":false,"isInput":false,"isOutput":true,"name":"StatementTypeCheck","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"exitsHere"}},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"underwritingBundle","objectType":"LLC_BI__Underwriting_Bundle__c","processMetadataValues":[],"scale":null,"value":null}],"waits":[]},"FullName":"CPAcollectedStatements-1"}