{"attributes":{"type":"Flow","url":"/services/data/v35.0/tooling/sobjects/Flow/301360000002LYOAA2"},"Id":"301360000002LYOAA2","DefinitionId":"3003600000054HEAAY","MasterLabel":"BorrowerDebtToTangibleNetWorth","ManageableState":"unmanaged","VersionNumber":1,"Status":"Draft","Description":null,"ProcessType":"AutoLaunchedFlow","CreatedDate":"2016-07-26T22:07:43.000+0000","CreatedById":"005360000024TF2AAM","LastModifiedDate":"2016-07-26T22:07:53.000+0000","LastModifiedById":"005360000024TF2AAM","Metadata":{"actionCalls":[],"apexPluginCalls":[],"assignments":[{"assignmentItems":[{"assignToReference":"PolicyException.LLC_BI__Code__c","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"005"}},{"assignToReference":"PolicyException.LLC_BI__Loan__c","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"LegalEntity.LLC_BI__Loan__c","numberValue":null,"stringValue":null}},{"assignToReference":"PolicyException.LLC_BI__Severity__c","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"PeSeverity","numberValue":null,"stringValue":null}},{"assignToReference":"PolicyException.LLC_BI__Type__c","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"PeType","numberValue":null,"stringValue":null}},{"assignToReference":"PolicyException.Name","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"PeName","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Insert_PE"},"description":null,"label":"Assign PE","locationX":149,"locationY":130,"name":"Assign_PE","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"EndFlow","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":true,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":null,"description":null,"label":"EndThisFlow","locationX":552,"locationY":370,"name":"EndThisFlow","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"LegalEntity","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"inLegalEntity","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"IsLegalEntityExists"},"description":null,"label":"inBorrowerLegalEntity","locationX":632,"locationY":19,"name":"inBorrowerLegalEntity","processMetadataValues":[]}],"choices":[],"constants":[{"dataType":"Number","description":null,"name":"DebtToTangibleNetWorthThreshold","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":4.0,"stringValue":null}},{"dataType":"String","description":null,"name":"PeName","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Borrower's Leverage Ratio is greater than 4x"}},{"dataType":"String","description":null,"name":"PeSeverity","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Major"}},{"dataType":"String","description":null,"name":"PeType","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Covenant"}},{"dataType":"String","description":null,"name":"StmtRecordTotalName","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Ratio. Debt to TNW"}}],"decisions":[{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Did not create PE","description":null,"label":"If did create PE","locationX":459,"locationY":13,"name":"If_did_create_PE","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"didCreatePe","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":true,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":null,"description":null,"label":"Created PE","name":"Created_PE","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Less Than Threshold","description":null,"label":"Is DebtToTNR Too High","locationX":76,"locationY":258,"name":"Is_DebtToTNR_Too_High","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"StmtPeriodTotal.LLC_BI__Value__c","operator":"GreaterThanOrEqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"DebtToTangibleNetWorthThreshold","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Assign_PE"},"description":null,"label":"Greater Than or Equal To Threshold","name":"Greater_Than_or_Equal_To_Threshold","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Period Doesnt Exist","description":null,"label":"Is Period Exists","locationX":661,"locationY":714,"name":"Is_Period_Exists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"StmtPeriod","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"GetStmtRecordTotal"},"description":null,"label":"Period Exists","name":"Period_Exists","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Period Total Doesnt Exist","description":null,"label":"Is Period Total Exists","locationX":61,"locationY":413,"name":"Is_Period_Total_Exists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"StmtPeriodTotal","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Is_DebtToTNR_Too_High"},"description":null,"label":"Period Total Exists","name":"Period_Total_Exists","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Record Total Doesnt Exist","description":null,"label":"Is Record Total Exists","locationX":264,"locationY":665,"name":"Is_Record_Total_Exists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"StmtRecordTotal","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"GetPeriodTotal"},"description":null,"label":"Record Total Exists","name":"Record_Total_Exists","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Bundle doesnt exist","description":null,"label":"IsBundleExists","locationX":1022,"locationY":284,"name":"IsBundleExists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"UndBundle","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"GetStmtTemplate"},"description":null,"label":"Bundle Exists","name":"Bundle_Exists","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"Legal Entity doesnt exist","description":null,"label":"IsLegalEntityExists","locationX":800,"locationY":51,"name":"IsLegalEntityExists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"LegalEntity","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"GetBundle"},"description":null,"label":"Legal Entity Exists","name":"Legal_Entity_Exists","processMetadataValues":[]}]},{"defaultConnector":{"processMetadataValues":[],"targetReference":"EndThisFlow"},"defaultConnectorLabel":"[Default Outcome]","description":null,"label":"IsTemplateExists","locationX":988,"locationY":537,"name":"IsTemplateExists","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"StmtTemplate","operator":"IsNull","processMetadataValues":[],"rightValue":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}},{"leftValueReference":"StmtTemplate.LLC_BI__Is_Ratios__c","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"boolTrueNum","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"GetStmtPeriod"},"description":null,"label":"Template Exists","name":"Template_Exists","processMetadataValues":[]}]}],"description":null,"dynamicChoiceSets":[],"formulas":[],"interviewLabel":"BorrowerDebtToTangibleNetWorth {!$Flow.CurrentDateTime}","label":"BorrowerDebtToTangibleNetWorth","loops":[],"processMetadataValues":[],"processType":"AutoLaunchedFlow","recordCreates":[],"recordDeletes":[],"recordLookups":[{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"IsBundleExists"},"description":null,"faultConnector":null,"filters":[{"field":"LLC_BI__Is_Disabled__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}},{"field":"LLC_BI__Relationship__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"LegalEntity.LLC_BI__Account__c","numberValue":null,"stringValue":null}}],"label":"GetBundle","locationX":958,"locationY":163,"name":"GetBundle","object":"LLC_BI__Underwriting_Bundle__c","outputAssignments":[],"outputReference":"UndBundle","processMetadataValues":[],"queriedFields":["Id"],"sortField":null,"sortOrder":null},{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"Is_Period_Total_Exists"},"description":null,"faultConnector":null,"filters":[{"field":"LLC_BI__Spread_Statement_Period__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"StmtPeriod.Id","numberValue":null,"stringValue":null}},{"field":"LLC_BI__Spread_Statement_Record_Total__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"StmtRecordTotal.Id","numberValue":null,"stringValue":null}}],"label":"GetPeriodTotal","locationX":111,"locationY":546,"name":"GetPeriodTotal","object":"LLC_BI__Spread_Statement_Period_Total__c","outputAssignments":[],"outputReference":"StmtPeriodTotal","processMetadataValues":[],"queriedFields":["Id","LLC_BI__Value__c"],"sortField":null,"sortOrder":null},{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"Is_Period_Exists"},"description":null,"faultConnector":null,"filters":[{"field":"LLC_BI__Spread_Statement_Type__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"StmtTemplate.Id","numberValue":null,"stringValue":null}}],"label":"GetStmtPeriod","locationX":848,"locationY":662,"name":"GetStmtPeriod","object":"LLC_BI__Spread_Statement_Period__c","outputAssignments":[],"outputReference":"StmtPeriod","processMetadataValues":[],"queriedFields":["Id"],"sortField":"LLC_BI__Statement_Date__c","sortOrder":"Desc"},{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"Is_Record_Total_Exists"},"description":null,"faultConnector":null,"filters":[{"field":"LLC_BI__Spread_Statement_Type__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"StmtTemplate.Id","numberValue":null,"stringValue":null}},{"field":"LLC_BI__Title__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"StmtRecordTotalName","numberValue":null,"stringValue":null}}],"label":"GetStmtRecordTotal","locationX":421,"locationY":713,"name":"GetStmtRecordTotal","object":"LLC_BI__Spread_Statement_Record_Total__c","outputAssignments":[],"outputReference":"StmtRecordTotal","processMetadataValues":[],"queriedFields":["Id"],"sortField":null,"sortOrder":null},{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"IsTemplateExists"},"description":null,"faultConnector":null,"filters":[{"field":"LLC_BI__Bundle__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"UndBundle.Id","numberValue":null,"stringValue":null}},{"field":"LLC_BI__Is_Ratios__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"boolTrueNum","numberValue":null,"stringValue":null}}],"label":"GetStmtTemplate","locationX":1027,"locationY":412,"name":"GetStmtTemplate","object":"LLC_BI__Spread_Statement_Type__c","outputAssignments":[],"outputReference":"StmtTemplate","processMetadataValues":[],"queriedFields":["LLC_BI__Type__c","Id","LLC_BI__Is_Ratios__c"],"sortField":null,"sortOrder":null}],"recordUpdates":[],"screens":[],"startElementReference":"inBorrowerLegalEntity","steps":[],"subflows":[{"connector":{"processMetadataValues":[],"targetReference":"If_did_create_PE"},"description":null,"flowName":"InsertPolicyExceptionUnique","inputAssignments":[{"name":"inPolicyException","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"PolicyException","numberValue":null,"stringValue":null}}],"label":"Insert PE","locationX":278,"locationY":39,"name":"Insert_PE","outputAssignments":[{"assignToReference":"didCreatePe","name":"outDidInsert","processMetadataValues":[]}],"processMetadataValues":[]}],"textTemplates":[],"urls":null,"variables":[{"dataType":"Number","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"boolTrueNum","objectType":null,"processMetadataValues":[],"scale":0,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":1.0,"stringValue":null}},{"dataType":"String","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"borrower","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"Borrower"}},{"dataType":"String","description":null,"isCollection":false,"isInput":true,"isOutput":false,"name":"BorrowerAccount","objectType":null,"processMetadataValues":[],"scale":null,"value":null},{"dataType":"Boolean","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"didCreatePe","objectType":null,"processMetadataValues":[],"scale":null,"value":null},{"dataType":"Boolean","description":null,"isCollection":false,"isInput":false,"isOutput":true,"name":"DidntWork","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}},{"dataType":"Boolean","description":null,"isCollection":false,"isInput":false,"isOutput":true,"name":"EndFlow","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}},{"dataType":"SObject","description":null,"isCollection":false,"isInput":true,"isOutput":false,"name":"inLegalEntity","objectType":"LLC_BI__Legal_Entities__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"LegalEntity","objectType":"LLC_BI__Legal_Entities__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"String","description":null,"isCollection":false,"isInput":true,"isOutput":false,"name":"LoanId","objectType":null,"processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"PolicyException","objectType":"LLC_BI__Policy_Exception__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"Spread","objectType":"LLC_BI__Spread__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"StmtPeriod","objectType":"LLC_BI__Spread_Statement_Period__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"StmtPeriodTotal","objectType":"LLC_BI__Spread_Statement_Period_Total__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"StmtRecordTotal","objectType":"LLC_BI__Spread_Statement_Record_Total__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"StmtTemplate","objectType":"LLC_BI__Spread_Statement_Type__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"UndBundle","objectType":"LLC_BI__Underwriting_Bundle__c","processMetadataValues":[],"scale":null,"value":null}],"waits":[]},"FullName":"BorrowerDebtToTangibleNetWorth-1"}