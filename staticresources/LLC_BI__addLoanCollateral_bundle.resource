!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=84)}([function(module,exports){module.exports=function(useSourceMap){var list=[];return list.toString=function toString(){return this.map(function(item){var content=function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=function toComment(sourceMap){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */"}(cssMapping),sourceURLs=cssMapping.sources.map(function(source){return"/*# sourceURL="+cssMapping.sourceRoot+source+" */"});return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}(item,useSourceMap);return item[2]?"@media "+item[2]+"{"+content+"}":content}).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){var fn,memo,stylesInDom={},isOldIE=(fn=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===memo&&(memo=fn.apply(this,arguments)),memo}),getElement=function(fn){var memo={};return function(target,parent){if("function"==typeof target)return target();if(void 0===memo[target]){var styleTarget=function(target,parent){return parent?parent.querySelector(target):document.querySelector(target)}.call(this,target,parent);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),singleton=null,singletonCounter=0,stylesInsertedAtTop=[],fixUrls=__webpack_require__(2);function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{var parts=[];for(j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list,options){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],part={css:item[1],media:item[2],sourceMap:item[3]};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,style){var target=getElement(options.insertInto);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=stylesInsertedAtTop[stylesInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?target.insertBefore(style,lastStyleElementInsertedAtTop.nextSibling):target.appendChild(style):target.insertBefore(style,target.firstChild),stylesInsertedAtTop.push(style);else if("bottom"===options.insertAt)target.appendChild(style);else{if("object"!=typeof options.insertAt||!options.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var nextSibling=getElement(options.insertAt.before,target);target.insertBefore(style,nextSibling)}}function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style);var idx=stylesInsertedAtTop.indexOf(style);0<=idx&&stylesInsertedAtTop.splice(idx,1)}function createStyleElement(options){var style=document.createElement("style");if(void 0===options.attrs.type&&(options.attrs.type="text/css"),void 0===options.attrs.nonce){var nonce=function getNonce(){0;return __webpack_require__.nc}();nonce&&(options.attrs.nonce=nonce)}return addAttrs(style,options.attrs),insertStyleElement(options,style),style}function addAttrs(el,attrs){Object.keys(attrs).forEach(function(key){el.setAttribute(key,attrs[key])})}function addStyle(obj,options){var style,update,remove,result;if(options.transform&&obj.css){if(!(result="function"==typeof options.transform?options.transform(obj.css):options.transform.default(obj.css)))return function(){};obj.css=result}if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=createStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else remove=obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(style=function createLinkElement(options){var link=document.createElement("link");return void 0===options.attrs.type&&(options.attrs.type="text/css"),options.attrs.rel="stylesheet",addAttrs(link,options.attrs),insertStyleElement(options,link),link}(options),update=function updateLink(link,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css));sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=link.href;link.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}.bind(null,style,options),function(){removeStyleElement(style),style.href&&URL.revokeObjectURL(style.href)}):(style=createStyleElement(options),update=function applyToTag(style,obj){var css=obj.css,media=obj.media;media&&style.setAttribute("media",media);if(style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}.bind(null,style),function(){removeStyleElement(style)});return update(obj),function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(options=options||{}).attrs="object"==typeof options.attrs?options.attrs:{},options.singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE()),options.insertInto||(options.insertInto="head"),options.insertAt||(options.insertAt="bottom");var styles=listToStyles(list,options);return addStylesToDom(styles,options),function update(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i];(domStyle=stylesInDom[item.id]).refs--,mayRemove.push(domStyle)}newList&&addStylesToDom(listToStyles(newList,options),options);for(i=0;i<mayRemove.length;i++){var domStyle;if(0===(domStyle=mayRemove[i]).refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}},function(module,exports){module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/");return css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(fullMatch,origUrl){var newUrl,unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,function(o,$1){return $1}).replace(/^'(.*)'$/,function(o,$1){return $1});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(unquotedOrigUrl)?fullMatch:(newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")")})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(85)},function(module,exports,__webpack_require__){__webpack_require__(86),__webpack_require__(88),__webpack_require__(90),__webpack_require__(92),__webpack_require__(94),__webpack_require__(95),__webpack_require__(96),__webpack_require__(98),__webpack_require__(100),__webpack_require__(102),__webpack_require__(104),__webpack_require__(106),__webpack_require__(108),__webpack_require__(109),__webpack_require__(110)},function(module,exports,__webpack_require__){var content=__webpack_require__(87);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(1)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){(module.exports=__webpack_require__(0)(!1)).push([module.i,"",""])},function(module,exports,__webpack_require__){var content=__webpack_require__(89);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(1)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){(module.exports=__webpack_require__(0)(!1)).push([module.i,"",""])},function(module,exports,__webpack_require__){var content=__webpack_require__(91);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(1)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){(module.exports=__webpack_require__(0)(!1)).push([module.i,".section-header {\n\tcolor: #405883;\n\tmargin: 15px;\n\tpadding: 10px;\n\tbackground-color: #F4F6F8;\n\tborder-radius: 4px;\n}",""])},function(module,exports,__webpack_require__){var content=__webpack_require__(93);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(1)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){(module.exports=__webpack_require__(0)(!1)).push([module.i,"",""])},function(module,exports){!function(){"use strict";angular.module("ncAddLoanCollateral",["ncDataProviders","ncUI","ncPubsub","ncCollateralUtil"])}()},function(module,exports){!function(){"use strict";angular.element(document).ready(function(){angular.bootstrap(document.getElementById("ncAddLoanCollateral"),["ncAddLoanCollateral"])})}()},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncAddLoanCollateral").component("addLoanCollateral",{controllerAs:"addLoanCollateral",bindings:{isLeasedAsset:"<?",vehicleValuationProvider:"<?"},controller:["config","label","pubsub","alcConstants",function(config,label,pubsub,alcConstants){var addLoanCollateral=this;addLoanCollateral.config=config.get(),addLoanCollateral.labels=label.getLabels(),addLoanCollateral.loaded=!1,addLoanCollateral.valuationState=null,addLoanCollateral.showValuation=!0,addLoanCollateral.$onInit=function(){pubsub.subscribe(alcConstants.topics.valuationState,function(state){addLoanCollateral.showValuation=!state.showVehicleValuation||state.isManualValuation}),addLoanCollateral.loaded=!0},addLoanCollateral.$onDestroy=function(){pubsub.unsubscribe(alcConstants.topics.valuationState)}}],template:__webpack_require__(97)})}()},function(module,exports){module.exports='<div> <select-collateral-type ng-if="addLoanCollateral.isLeasedAsset != null" is-leased-asset=addLoanCollateral.isLeasedAsset> </select-collateral-type> <add-collateral-ownership> </add-collateral-ownership> <vehicle-valuation vehicle-valuation-provider=addLoanCollateral.vehicleValuationProvider> </vehicle-valuation> <add-collateral-valuation ng-show=addLoanCollateral.showValuation> </add-collateral-valuation> </div> '},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncAddLoanCollateral").component("addLoanCollateralModal",{controllerAs:"addLoanCollateralModal",bindings:{isLeasedAsset:"<?",vehicleValuationProvider:"<?",close:"<",currentApp:"<",currentPage:"<"},controller:["config","label","pubsub","alcConstants","addLoanCollateralService","collateralDtosService","navigator",function(config,label,pubsub,alcConstants,addLoanCollateralService,collateralDtosService,navigator){var addLoanCollateralModal=this;addLoanCollateralModal.config=config.get(),addLoanCollateralModal.labels=label.getLabels(),addLoanCollateralModal.loaded=!1,addLoanCollateralModal.showModal=!0,addLoanCollateralModal.showLoadingIcon=!0,addLoanCollateralModal.hasError=!1,addLoanCollateralModal.primaryDisabled=!0,addLoanCollateralModal.fieldsetNames=null,addLoanCollateralModal.ownershipFieldset=null,addLoanCollateralModal.valuationState=null,addLoanCollateralModal.primaryLabel=addLoanCollateralModal.labels.saveCollateral,addLoanCollateralModal.$onInit=function(){pubsub.subscribe(alcConstants.topics.valuationState,function(state){addLoanCollateralModal.valuationState=state,addLoanCollateralModal.updateModalState()}),pubsub.subscribe(alcConstants.topics.showLoadingIcon,function(showLoadingIcon){addLoanCollateralModal.showLoadingIcon=showLoadingIcon}),pubsub.subscribe(alcConstants.topics.collateralFieldsets,function(fieldsetNames){addLoanCollateralModal.fieldsetNames=JSON.parse(fieldsetNames),addLoanCollateralModal.checkIsValid()}),pubsub.subscribe(alcConstants.topics.ownershipFieldset,function(ownershipFieldset){addLoanCollateralModal.ownershipFieldset=ownershipFieldset,addLoanCollateralModal.checkIsValid()}),pubsub.subscribe(alcConstants.topics.hasError,function(message){addLoanCollateralModal.toastMessage=message,addLoanCollateralModal.hasError=!0}),addLoanCollateralModal.primaryAction=addLoanCollateralModal.navigateToPledge,addLoanCollateralModal.loaded=!0},addLoanCollateralModal.$onDestroy=function(){pubsub.unsubscribe(alcConstants.topics.valuationState),pubsub.unsubscribe(alcConstants.topics.showLoadingIcon),pubsub.unsubscribe(alcConstants.topics.collateralFieldsets),pubsub.unsubscribe(alcConstants.topics.ownershipFieldset),pubsub.unsubscribe(alcConstants.topics.hasError)},addLoanCollateralModal.cancel=function(){addLoanCollateralModal.close()},addLoanCollateralModal.saveCollateral=function(){return addLoanCollateralService.saveCollaterals(collateralDtosService.getCollateralDto(),addLoanCollateralModal.fieldsetNames,addLoanCollateralModal.ownershipFieldset)},addLoanCollateralModal.navigateToPledge=function(){addLoanCollateralModal.showLoadingIcon=!0,addLoanCollateralModal.primaryDisabled=!0,addLoanCollateralModal.saveCollateral().then(function(result){var collaterals=result.outboundCollateralDtos.map(function(dto){return{collateralId:dto.identity}});pubsub.publish(alcConstants.topics.buildPledgeModel,JSON.stringify(collaterals))}).catch(function(error){addLoanCollateralModal.showLoadingIcon=!1,addLoanCollateralModal.toastMessage=error,addLoanCollateralModal.primaryDisabled=!1,addLoanCollateralModal.hasError=!0})},addLoanCollateralModal.navigateToVehicleValuation=function(){addLoanCollateralModal.showLoadingIcon=!0,addLoanCollateralModal.primaryDisabled=!0,collateralDtosService.resetAttributes(),addLoanCollateralModal.saveCollateral().then(function(result){var urlToNavTo=alcConstants.apex+addLoanCollateralModal.currentPage+alcConstants.appVariable+addLoanCollateralModal.currentApp.split(".")[0]+"."+alcConstants.vehicleValuationApp+alcConstants.idVariable+addLoanCollateralModal.config.contextId+alcConstants.collateralVariable+result.outboundCollateralDtos[0].identity;navigator.isSF1App()?sforce.one.navigateToURL(urlToNavTo,!0):navigator.navigateToRoute(urlToNavTo),addLoanCollateralModal.showLoadingIcon=!1,addLoanCollateralModal.close()}).catch(function(error){addLoanCollateralModal.showLoadingIcon=!1,addLoanCollateralModal.toastMessage=error,addLoanCollateralModal.primaryDisabled=!1,addLoanCollateralModal.hasError=!0})},addLoanCollateralModal.updateModalState=function(){!addLoanCollateralModal.valuationState.showVehicleValuation||addLoanCollateralModal.valuationState.isManualValuation?(addLoanCollateralModal.primaryAction=addLoanCollateralModal.navigateToPledge,addLoanCollateralModal.primaryLabel=addLoanCollateralModal.labels.saveCollateral):addLoanCollateralModal.valuationState.isProviderValuation&&(addLoanCollateralModal.primaryAction=addLoanCollateralModal.navigateToVehicleValuation,addLoanCollateralModal.primaryLabel=addLoanCollateralModal.labels.Continue_To_Valuation)},addLoanCollateralModal.checkIsValid=function(){null!=addLoanCollateralModal.fieldsetNames&&null!=addLoanCollateralModal.ownershipFieldset?addLoanCollateralModal.primaryDisabled=!1:addLoanCollateralModal.primaryDisabled=!0},addLoanCollateralModal.clearToast=function(){addLoanCollateralModal.toastMessage="",addLoanCollateralModal.hasError=!1}}],template:__webpack_require__(99)})}()},function(module,exports){module.exports='<nds-modal size=large loading="{{ addLoanCollateralModal.showLoadingIcon }}" close-title="{{ addLoanCollateralModal.labels.cancel }}" ng-on-modal_close=addLoanCollateralModal.cancel() primary-disabled=addLoanCollateralModal.primaryDisabled header-id=add-loan-collateral-modal> <div slot=header> <h2 id=add-loan-collateral-modal-header class=slds-modal__title ng-bind=::addLoanCollateralModal.labels.addHeader></h2> </div> <div slot=content> <nds-toast ng-if=addLoanCollateralModal.hasError message="{{ addLoanCollateralModal.toastMessage }}" variant=error variant-title=error close-title="{{ addLoanCollateralModal.labels.cancel }}" ng-on-toast_close=addLoanCollateralModal.clearToast()></nds-toast> <div class="slds-section slds-is-open"> <add-loan-collateral is-leased-asset=addLoanCollateralModal.isLeasedAsset vehicle-valuation-provider=addLoanCollateralModal.vehicleValuationProvider> </add-loan-collateral> </div> </div> <div slot=footer> <span id=vvRouteWarning2> <span ng-if="\n\t\t\t\t\taddLoanCollateralModal.valuationState &&\n\t\t\t\t\taddLoanCollateralModal.valuationState.showVehicleValuation &&\n\t\t\t\t\taddLoanCollateralModal.valuationState.routeMissing\n\t\t\t\t" popover=popover class=popover-icon-warning data-content="{{ addLoanCollateralModal.labels.Vehicle_Valuation_Route_Warning }}" ng-include=addLoanCollateralModal.config.warningIcon> </span> </span> <nds-button theme=neutral ng-click=addLoanCollateralModal.cancel() ng-bind=addLoanCollateralModal.labels.cancel></nds-button> <nds-button ng-disabled=addLoanCollateralModal.primaryDisabled theme=brand ng-click=addLoanCollateralModal.primaryAction()>{{ addLoanCollateralModal.primaryLabel }}</nds-button> </div> </nds-modal> '},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncAddLoanCollateral").component("addCollateralOwnership",{controllerAs:"addCollateralOwnership",controller:["$q","config","label","addLoanCollateralService","collateralDtosService","alcConstants","pubsub",function($q,config,label,addLoanCollateralService,collateralDtosService,alcConstants,pubsub){var addCollateralOwnership=this;function populateRelationshipPicklist(legalEntities){var picklistRows=legalEntities.map(function(legalEntity){return{id:legalEntity.attributes.LLC_BI__Account__c,name:legalEntity.attributes["LLC_BI__Account__r.Name"]}});addCollateralOwnership.picklistModel={headers:[addCollateralOwnership.labels.relationshipName],displayedColumns:["name"],data:picklistRows}}function getExistingCollateralAssociation(relationshipId){return addCollateralOwnership.collateralAssociationEntities.find(function(collateralAssociation){return collateralAssociation.attributes.LLC_BI__Account__c===relationshipId})}addCollateralOwnership.config=config.get(),addCollateralOwnership.labels=label.getLabels(),addCollateralOwnership.ownershipFieldsetMetadata=[],addCollateralOwnership.relationshipsSelectedTopic=alcConstants.topics.selectedRelationship,addCollateralOwnership.picklistTableGuid=addCollateralOwnership.config.contextId+"picklistTable",addCollateralOwnership.selectText=addCollateralOwnership.labels.entityAssignmentPicklistEmpty,addCollateralOwnership.collateralAssociationEntities=[],addCollateralOwnership.fieldsetApi=null,addCollateralOwnership.$onInit=function(){addLoanCollateralService.getLegalEntities(addCollateralOwnership.config.contextId).then(populateRelationshipPicklist).catch(function(error){pubsub.publish(alcConstants.topics.hasError,error)}),pubsub.subscribe(alcConstants.topics.selectedCollateralType,addCollateralOwnership.selectCollateralType),pubsub.subscribe(addCollateralOwnership.relationshipsSelectedTopic,addCollateralOwnership.selectRelationships)},addCollateralOwnership.$onDestroy=function(){pubsub.unsubscribe(alcConstants.topics.selectedCollateralType),pubsub.unsubscribe(addCollateralOwnership.relationshipsSelectedTopic)},addCollateralOwnership.selectCollateralType=function(collateralType){var collateralConfig;collateralType.attributes.LLC_BI__Collateral_Configuration__c.value&&(collateralConfig=JSON.parse(collateralType.attributes.LLC_BI__Collateral_Configuration__c.value)),addCollateralOwnership.fieldsetApi=collateralConfig&&collateralConfig.hasOwnProperty(alcConstants.ownershipAssignmentFieldSetProperty)?collateralConfig[alcConstants.ownershipAssignmentFieldSetProperty]:alcConstants.ownershipAssignmentDefaultFieldSetApi,function getFieldsetMetadata(fieldsetApi){return addLoanCollateralService.getFieldSetMetadata(alcConstants.ownershipAssignmentSObjectType,[fieldsetApi]).then(function(fieldsetMetadata){addCollateralOwnership.ownershipFieldsetMetadata=fieldsetMetadata.fieldSetMetadataMap[fieldsetApi]}).catch(function(error){pubsub.publish(alcConstants.topics.hasError,error)})}(addCollateralOwnership.fieldsetApi)},addCollateralOwnership.selectRelationships=function(picklistOptions){!function updateSelectedCollateralAssociations(selectedEntities){var selectedRelationshipIds=[];angular.forEach(selectedEntities,function(entity){var relationshipId=entity.attributes.LLC_BI__Account__c;getExistingCollateralAssociation(relationshipId)||addCollateralOwnership.collateralAssociationEntities.push(entity),selectedRelationshipIds.push(relationshipId)}),function removeUnselectedEntities(selectedRelationshipIds){for(var i=addCollateralOwnership.collateralAssociationEntities.length-1;0<=i;i--){var collAssociationRelId=addCollateralOwnership.collateralAssociationEntities[i].attributes.LLC_BI__Account__c;-1===selectedRelationshipIds.indexOf(collAssociationRelId)&&addCollateralOwnership.collateralAssociationEntities.splice(i,1)}}(selectedRelationshipIds),0<addCollateralOwnership.collateralAssociationEntities.length?pubsub.publish(alcConstants.topics.ownershipFieldset,addCollateralOwnership.fieldsetApi):pubsub.publish(alcConstants.topics.ownershipFieldset,null)}(picklistOptions.rows.map(function(relationship){return{identity:null,attributes:{LLC_BI__Account__c:relationship.id,"LLC_BI__Account__r.Name":relationship.name}}})),function updateSelectText(){1<addCollateralOwnership.collateralAssociationEntities.length?addCollateralOwnership.selectText=addCollateralOwnership.collateralAssociationEntities.length+" "+addCollateralOwnership.labels.entityAssignmentPicklistMultiple:1===addCollateralOwnership.collateralAssociationEntities.length?addCollateralOwnership.selectText=addCollateralOwnership.collateralAssociationEntities[0].attributes["LLC_BI__Account__r.Name"]:addCollateralOwnership.selectText=addCollateralOwnership.labels.entityAssignmentPicklistEmpty}(),collateralDtosService.setCollateralAssociationDtos(addCollateralOwnership.collateralAssociationEntities)},addCollateralOwnership.handleInputChange=function(relationshipId,fieldPath,value){var editedRow=getExistingCollateralAssociation(relationshipId);editedRow.attributes[fieldPath]=value,collateralDtosService.updateCollateralAssociationDto(editedRow)}}],template:__webpack_require__(101)})}()},function(module,exports){module.exports='<div class=slds-p-around--small> <association-card ng-if=addCollateralOwnership.ownershipFieldsetMetadata.length> <card-header-left> <div class=slds-m-around--small ng-bind="addCollateralOwnership.labels.entityAssignmentHeader | uppercase"></div> </card-header-left> <card-header-right> <div ng-if=addCollateralOwnership.picklistModel> <div> <span ng-bind=vm.labels.entityAssignmentAssignTo></span> </div> <div> <picklist-table publish-topic={{addCollateralOwnership.relationshipsSelectedTopic}} select-text={{addCollateralOwnership.selectText}} elements=addCollateralOwnership.picklistModel.data display-columns=addCollateralOwnership.picklistModel.displayedColumns headers=addCollateralOwnership.picklistModel.headers multi-select-enabled=true guid={{addCollateralOwnership.picklistTableGuid}}> </picklist-table> </div> </div> </card-header-right> <card-body> <nds-table> <table class="slds-table_bordered slds-table--cell-buffer"> <thead> <tr> <th ng-repeat="field in addCollateralOwnership.ownershipFieldsetMetadata" ng-bind=field.label></th> </tr> </thead> <tbody> <tr ng-repeat="row in addCollateralOwnership.collateralAssociationEntities"> <td ng-repeat="field in addCollateralOwnership.ownershipFieldsetMetadata"> <a ng-if="field.fieldPath == \'LLC_BI__Account__r.Name\'" href="/{{row.attributes[\'LLC_BI__Account__c\']}}" target=_blank> <span ng-bind="row.attributes[\'LLC_BI__Account__r.Name\']"></span> <nds-icon icon-type=utility icon-name=new_window span-class=slds-current-color svg-class="slds-p-bottom_xx-small slds-p-left_xxx-small slds-icon_x-small" fill=#0070d2></nds-icon> </a> <nds-form-element ng-if="field.fieldPath !== \'LLC_BI__Account__r.Name\'\n\t\t\t\t\t\t\t\t\t\t&& field.fieldType !== \'BOOLEAN\'" is-editable=true metadata={{field}} hide-label=true ng-on-value_change="addCollateralOwnership.handleInputChange(\n\t\t\t\t\t\t\t\t\t\trow.attributes.LLC_BI__Account__c, field.fieldPath, $event.detail\n\t\t\t\t\t\t\t\t\t)" ng-on-options_array_change="addCollateralOwnership.handleInputChange(\n\t\t\t\t\t\t\t\t\t\trow.attributes.LLC_BI__Account__c, field.fieldPath, $event.detail\n\t\t\t\t\t\t\t\t\t)"></nds-form-element> <nds-input-checkbox ng-if="field.fieldType == \'BOOLEAN\'" ng-on-value_change="addCollateralOwnership.handleInputChange(\n\t\t\t\t\t\t\t\t\t\trow.attributes.LLC_BI__Account__c, field.fieldPath, $event.detail\n\t\t\t\t\t\t\t\t\t)"></nds-input-checkbox> </td> </tr> </tbody> </table> </nds-table> </card-body> </association-card> </div> '},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncAddLoanCollateral").component("selectCollateralType",{controllerAs:"selectCollateralType",bindings:{isLeasedAsset:"<"},controller:["config","label","pubsub","addLoanCollateralService","alcConstants",function(config,label,pubsub,addLoanCollateralService,alcConstants){var selectCollateralType=this;function addSubTypeToTypesMap(collateralType){var type=collateralType.attributes.LLC_BI__Type__c,subType=collateralType.attributes.LLC_BI__Subtype__c,collCode=collateralType.attributes.LLC_BI__Collateral_Code__c.value?"-"+collateralType.attributes.LLC_BI__Collateral_Code__c.value:"",subTypeCollCodeLabel=subType.translation?subType.translation+collCode:subType.value+collCode,subTypeCollCodeValue=subType.value+collCode;selectCollateralType.typeToSubtypesMap[type.value]?selectCollateralType.typeToSubtypesMap[type.value].push({identity:collateralType.identity,label:subTypeCollCodeLabel,value:subTypeCollCodeValue}):(selectCollateralType.types.push({label:type.translation?type.translation:type.value,value:type.value}),selectCollateralType.typeToSubtypesMap[type.value]=[{identity:collateralType.identity,label:subTypeCollCodeLabel,value:subTypeCollCodeValue}])}selectCollateralType.config=config.get(),selectCollateralType.labels=label.getLabels(),selectCollateralType.loaded=!1,selectCollateralType.excludeGroupTypes=!0,selectCollateralType.collateralTypes=null,selectCollateralType.types=[],selectCollateralType.selectedTypeSubTypes=null,selectCollateralType.selectedCollateralType=null,selectCollateralType.selectedCollateralTypeScreen=null,selectCollateralType.typeToSubtypesMap=[{}],selectCollateralType.$onInit=function(){pubsub.publish(alcConstants.topics.showLoadingIcon,!0),selectCollateralType.loanId=selectCollateralType.config.loanId,function loadCollateralTypes(){addLoanCollateralService.getCollateralTypes(selectCollateralType.loanId,selectCollateralType.isLeasedAsset,selectCollateralType.excludeGroupTypes).then(function(collateralTypes){selectCollateralType.collateralTypes=collateralTypes.collateralTypes;for(var x=0;x<selectCollateralType.collateralTypes.length;x++)addSubTypeToTypesMap(selectCollateralType.collateralTypes[x])}).catch(function(error){pubsub.publish(alcConstants.topics.hasError,error)}).finally(function(){pubsub.publish(alcConstants.topics.showLoadingIcon,!1)})}(),selectCollateralType.loaded=!0},selectCollateralType.onTypeSelect=function(type){selectCollateralType.selectedTypeSubTypes=[],selectCollateralType.selectedTypeSubTypes=selectCollateralType.typeToSubtypesMap[type]},selectCollateralType.onSubTypeSelect=function(subType){var selectedSubtype=selectCollateralType.selectedTypeSubTypes.find(function(sType){return sType.value===subType});selectCollateralType.selectedCollateralType=selectCollateralType.collateralTypes.find(function(collateralType){return collateralType.identity===selectedSubtype.identity}),pubsub.publish(alcConstants.topics.selectedCollateralType,selectCollateralType.selectedCollateralType)}}],template:__webpack_require__(103)})}()},function(module,exports){module.exports='<div> <div class="section-header slds-m-around--small" ng-bind="selectCollateralType.labels.editTypeHeader | uppercase"></div> <div ng-if=selectCollateralType.loaded> <div class="slds-form-element__row slds-grid"> <div class="slds-form-element slds-size--1-of-2 slds-p-horizontal--small"> <nds-input-picklist label="{{:: selectCollateralType.labels.type}}" required=true options={{selectCollateralType.types}} emit-string=true allow-deselect=false ng-on-options_array_change=selectCollateralType.onTypeSelect($event.detail) native-element=true> </nds-input-picklist> </div> <div class="slds-form-element slds-size--1-of-2 slds-p-horizontal--small"> <nds-input-picklist label={{::selectCollateralType.labels.subType}} required=true options={{selectCollateralType.selectedTypeSubTypes}} emit-string=true allow-deselect=false ng-on-options_array_change=selectCollateralType.onSubTypeSelect($event.detail) native-element=true> </nds-input-picklist> </div> </div> </div> </div> '},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncAddLoanCollateral").component("vehicleValuation",{controllerAs:"vehicleValuation",bindings:{vehicleValuationProvider:"<"},controller:["config","label","addLoanCollateralService","messageService","pubsub","alcConstants",function(config,label,addLoanCollateralService,messageService,pubsub,alcConstants){var vehicleValuation=this;vehicleValuation.config=config.get(),vehicleValuation.labels=label.getLabels(),vehicleValuation.valuationMethods=[],vehicleValuation.loaded=!1,vehicleValuation.routeMissing=!1,vehicleValuation.valuationState=null,vehicleValuation.selectedValuationMethod=null,vehicleValuation.$onInit=function(){pubsub.subscribe(alcConstants.topics.selectedCollateralType,function(collateralType){vehicleValuation.collateralTypeUpdate(collateralType.identity)}),addLoanCollateralService.checkRouteExists().then(function(results){vehicleValuation.routeMissing=!(0<results.length),vehicleValuation.resetState(),pubsub.publish(alcConstants.topics.valuationState,vehicleValuation.valuationState),vehicleValuation.loaded=!0},function(error){messageService.setMessage({type:messageService.messageTypes.error,text:error}),vehicleValuation.resetState(),pubsub.publish(alcConstants.topics.valuationState,vehicleValuation.valuationState),vehicleValuation.loaded=!0}),addLoanCollateralService.getValuationLabels().then(function(results){vehicleValuation.valuationMethods=[results.Search_With_Vehicle_Valuation,vehicleValuation.labels.Enter_Value_Manually]},function(error){messageService.setMessage({type:messageService.messageTypes.error,text:error})})},vehicleValuation.$onDestroy=function(){vehicleValuation.resetState(),pubsub.publish(alcConstants.topics.valuationState,vehicleValuation.valuationState),pubsub.unsubscribe(alcConstants.topics.selectedCollateralType)},vehicleValuation.collateralTypeUpdate=function(typeId){addLoanCollateralService.getValuationMethods(vehicleValuation.config.contextId,typeId).then(function(results){for(var valProviderFound=!1,i=0;i<results.length;i++)if(results[i]==vehicleValuation.vehicleValuationProvider){valProviderFound=vehicleValuation.valuationState.showVehicleValuation=!0;break}valProviderFound||vehicleValuation.resetState(),pubsub.publish(alcConstants.topics.valuationState,vehicleValuation.valuationState)},function(error){messageService.setMessage({type:messageService.messageTypes.error,text:error})})},vehicleValuation.resetState=function(){vehicleValuation.valuationState={showVehicleValuation:!1,isProviderValuation:!1,isManualValuation:!1,routeMissing:vehicleValuation.routeMissing},vehicleValuation.selectedValuationMethod=null},vehicleValuation.valuationMethodSelected=function(valuationMethod){(vehicleValuation.selectedValuationMethod=valuationMethod)==vehicleValuation.valuationMethods[0]?(vehicleValuation.valuationState.isProviderValuation=!0,vehicleValuation.valuationState.isManualValuation=!1,pubsub.publish(alcConstants.topics.collateralFieldsets,JSON.stringify([]))):(vehicleValuation.valuationState.isProviderValuation=!1,vehicleValuation.valuationState.isManualValuation=!0),pubsub.publish(alcConstants.topics.valuationState,vehicleValuation.valuationState)}}],template:__webpack_require__(105)})}()},function(module,exports){module.exports='<div ng-if="vehicleValuation.valuationState && vehicleValuation.valuationState.showVehicleValuation"> <div class="section-header slds-m-around--small" ng-bind="vehicleValuation.labels.Valuation_Choice | uppercase"></div> <div class=slds-p-horizontal--medium> <div class=slds-p-bottom--small ng-bind=vehicleValuation.labels.How_Would_You_Like_To_Enter></div> <div class=slds-button-group role=group> <button ng-repeat="valuationMethod in vehicleValuation.valuationMethods" class=slds-button ng-class="\n\t\t\t\t\tvehicleValuation.selectedValuationMethod == valuationMethod\n\t\t\t\t\t\t? \'slds-button--brand\'\n\t\t\t\t\t\t: \'slds-button--neutral\'\n\t\t\t\t" ng-click=vehicleValuation.valuationMethodSelected(valuationMethod) ng-bind=valuationMethod></button> </div> </div> </div> '},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncAddLoanCollateral").component("addCollateralValuation",{controllerAs:"addCollateralValuation",controller:["config","pubsub","addLoanCollateralService","collateralDtosService","alcConstants",function(config,pubsub,addLoanCollateralService,collateralDtosService,alcConstants){var addCollateralValuation=this;addCollateralValuation.collateralDetailsForm=void 0,addCollateralValuation.config=config.get(),addCollateralValuation.loaded=!1,addCollateralValuation.collateralEntity={},addCollateralValuation.collateralFormMetadata={},addCollateralValuation.valuationFieldsets=[],addCollateralValuation.hasRequiredFields=!1,addCollateralValuation.$onInit=function(){pubsub.subscribe(alcConstants.topics.selectedCollateralType,function(collateralType){pubsub.publish(alcConstants.topics.collateralFieldsets,JSON.stringify(null)),addCollateralValuation.collateralDetailsForm=void 0,addCollateralValuation.hasRequiredFields=!1,null!==collateralType&&(pubsub.publish(alcConstants.topics.showLoadingIcon,!0),addCollateralValuation.collateralEntity={identity:null,attributes:{LLC_BI__Collateral_Type__c:collateralType.identity}},addCollateralValuation.sections=[],addCollateralValuation.screenId=collateralType.attributes.LLC_BI__Screen__c.value,""!==addCollateralValuation.screenId&&(addLoanCollateralService.getScreenMetadata([addCollateralValuation.screenId],null).then(function(sections){sections.screenData.forEach(function(screen,index){addCollateralValuation.sections.push({contextObject:screen.contextObject,sectionHeader:screen.sectionHeader,collateralEntity:addCollateralValuation.collateralEntity,fieldsetMetadata:JSON.parse(screen.fieldsetMetadata)}),addCollateralValuation.checkRequiredFields(JSON.parse(screen.fieldsetMetadata)),!0!==addCollateralValuation.hasRequiredFields&&pubsub.publish(alcConstants.topics.collateralFieldsets,JSON.stringify(addCollateralValuation.valuationFieldsets));var fieldsetName=JSON.parse(screen.fieldsetMetadata).identity;addCollateralValuation.valuationFieldsets.push(fieldsetName)})}).catch(function(error){pubsub.publish(alcConstants.topics.hasError,error)}).finally(function(){pubsub.publish(alcConstants.topics.showLoadingIcon,!1)}),addCollateralValuation.loaded=!0),collateralDtosService.setCollateralDto(addCollateralValuation.collateralEntity))}),pubsub.subscribe(alcConstants.topics.valuationState,function(state){state.isManualValuation&&addCollateralValuation.updateValidity()})},addCollateralValuation.$onDestroy=function(){pubsub.unsubscribe(alcConstants.topics.valuationState),pubsub.unsubscribe(alcConstants.topics.selectedCollateralType)},addCollateralValuation.updateProperties=function($event){var property=$event.detail;addCollateralValuation.collateralEntity.attributes[property.fieldPath]=property.value,collateralDtosService.updateCollateralDto(addCollateralValuation.collateralEntity),addCollateralValuation.updateValidity()},addCollateralValuation.isFormComplete=function(){return addCollateralValuation.collateralDetailsForm[0].checkValidity()},addCollateralValuation.updateValidity=function(){addCollateralValuation.isFormComplete()?pubsub.publish(alcConstants.topics.collateralFieldsets,JSON.stringify(addCollateralValuation.valuationFieldsets)):pubsub.publish(alcConstants.topics.collateralFieldsets,JSON.stringify(null))},addCollateralValuation.checkRequiredFields=function(fieldsetMetadata){fieldsetMetadata.fieldMetadata.forEach(function(field){field.required&&(addCollateralValuation.hasRequiredFields=!0)})}}],template:__webpack_require__(107)})}()},function(module,exports){module.exports='<div> <div ng-repeat="section in addCollateralValuation.sections"> <div class="section-header slds-m-around--small" ng-bind="section.sectionHeader | uppercase"></div> <nds-form columns=2 is-editable=true ng-ref=addCollateralValuation.collateralDetailsForm form-entity={{addCollateralValuation.collateralEntity}} form-metadata={{section.fieldsetMetadata.fieldMetadata}} ng-on-form_value_change=addCollateralValuation.updateProperties($event)></nds-form> </div> </div> '},function(module,exports){!function(){"use strict";angular.module("ncAddLoanCollateral").service("addLoanCollateralService",function addLoanCollateralService(config,$q,remotingManager,collateralUtil){var configData=config.get();function invokeRemoteAction(endpoint,params,escape){var deferred=$q.defer();return remotingManager.invokeAction(configData.remoteActionInvoke,endpoint,params,function(result,event){collateralUtil.setDeferred(deferred,result,event)},{escape:!1!==escape}),deferred.promise}this.getFieldSetMetadata=function(contextType,fieldsets){return invokeRemoteAction(configData.endpoints.fieldsetMetadataLoaderEndpoint,{args:JSON.stringify({filters:{contextType:contextType,identities:fieldsets}})})},this.getScreenMetadata=function(screenIds,screenLookupKeys){var params={ACTION:"LLC_BI.ColScreenMetadataServiceXPkg",ACTION_ARGS:JSON.stringify({screenIds:screenIds,screenLookupKeys:screenLookupKeys}),VERIFY_ACTION:!0};return invokeRemoteAction(configData.endpoints.remotingApiEndpoint,params,!1)},this.getCollateralTypes=function(loanId,isLeasedAsset,excludeGroupTypes){var params={ACTION:"LLC_BI.CollateralTypesLoaderXPkg",ACTION_ARGS:JSON.stringify({loanId:loanId,isLeasedAsset:isLeasedAsset,excludeGroupTypes:excludeGroupTypes})};return invokeRemoteAction(configData.endpoints.remotingApiEndpoint,params,!1)},this.getLegalEntities=function(contextId){return invokeRemoteAction(configData.endpoints.borrowingStructureLoaderEndpoint,{args:JSON.stringify({filters:{identities:[contextId]}})}).then(function(results){return results[0].legalEntities})},this.getValuationMethods=function(loanId,collateralTypeId){var params={loanId:loanId,collateralTypeId:collateralTypeId};return invokeRemoteAction(configData.endpoints.getValuationMethodsForCollateralType,params,!1)},this.getValuationLabels=function(){return invokeRemoteAction(configData.endpoints.getVehicleValuationLabels,{},!1)},this.checkRouteExists=function(){return invokeRemoteAction(configData.endpoints.getRouteByApp,{appName:"vehicle-valuation"},!1)},this.saveCollaterals=function(collateral,collateralFieldsetNames,collAssociationFieldsetName){var params={ACTION:configData.endpoints.saveCollateralsEndpoint,ACTION_ARGS:JSON.stringify({collaterals:JSON.stringify([collateral]),collateralFieldSetNames:collateralFieldsetNames,collateralAssociationFieldSetName:collAssociationFieldsetName}),VERIFY_ACTION:!0};return invokeRemoteAction(configData.endpoints.remotingApiEndpoint,params,!1)}})}()},function(module,exports){!function(){"use strict";angular.module("ncAddLoanCollateral").service("collateralDtosService",function collateralDtosService(){var service=this;service.collateralDto={},service.collateralAssociationDtos=[{}],service.setCollateralAssociationDtos=function(collateralAssociationDtos){service.collateralAssociationDtos=collateralAssociationDtos},service.updateCollateralAssociationDto=function(collateralAssociationDto){var collAssociationDto,relationshipId=collateralAssociationDto.attributes.LLC_BI__Account__c;(collAssociationDto=service.collateralAssociationDtos.find(function(dto){return dto.attributes.LLC_BI__Account__c===relationshipId}))?collAssociationDto.attributes=collateralAssociationDto.attributes:(collAssociationDto.identity=collateralAssociationDto.identity,collAssociationDto.attributes=collateralAssociationDto.attributes,service.collateralAssociationDtos.push(collAssociationDto))},service.setCollateralDto=function(collateral){service.collateralDto=collateral},service.updateCollateralDto=function(collateralDto){service.collateralDto.attributes=collateralDto.attributes},service.getCollateralDto=function(){return service.collateralDto.collateralAssociationsXPkgDtos=service.collateralAssociationDtos,service.collateralDto},service.resetAttributes=function(){service.collateralDto.attributes={LLC_BI__Collateral_Type__c:service.collateralDto.attributes.LLC_BI__Collateral_Type__c}}})}()},function(module,exports){!function(){"use strict";angular.module("ncAddLoanCollateral").constant("alcConstants",{topics:{showLoadingIcon:"AddLoanCollateral.showLoadingIcon",selectedCollateralType:"AddLoanCollateral.selectedCollateralType",selectedRelationship:"AddLoanCollateral.selectedRelationship",valuationState:"AddLoanCollateral.valuationState",ownershipFieldset:"AddLoanCollateral.ownershipFieldset",collateralFieldsets:"AddLoanCollateral.collateralFieldsets",buildPledgeModel:"AddLoanCollateral.buildPledgeModel",hasError:"AddLoanCollateral.hasError"},appVariable:"?app=",vehicleValuationApp:"vehicle-valuation",idVariable:"&id=",collateralVariable:"&collateralId=",warningElementId:"vvRouteWarning",footerClass:"slds-modal__footer",apex:"/apex/",ownershipAssignmentFieldSetProperty:"ownershipAssignmentFieldSetName",ownershipAssignmentDefaultFieldSetApi:"LLC_BI__Bulk_Ownership_Assignment",ownershipAssignmentSObjectType:"LLC_BI__Account_Collateral__c"})}()}]);